<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<style>
* {
  box-sizing: border-box;
}



/* Create three equal columns that floats next to each other */
.column1 {
  float: left;
  width: 15%;
  padding: 10px;
  height: 600px; /* Should be removed. Only for demonstration */
}

/* Create three equal columns that floats next to each other */
.column2	 {
  float: left;
  width: 65%;
  padding: 10px;
  height: 650px; /* Should be removed. Only for demonstration */
}
.column2_1	 {
  float: left;
  width: 70%;
  padding: 10px;
  height: 650px; /* Should be removed. Only for demonstration */
}

/* Create three equal columns that floats next to each other */
.column3	 {
  float: left;
  width: 20%;
  padding: 150px 10px 10px 10px;
  height: 650px; /* Should be removed. Only for demonstration */
}

/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}

/* Widget Header */
.wid_head {
	background-color: #f0d2f6;
    margin: 30px 0px 0px 0px;
    text-align: center;
    border: #6b9bc6;
    border-width: medium;
    border-style: groove;
}

/* Widget Items */
.items {
	margin: 0px 0px 8px 0px;
    border: #6b9bc6;
    border-width: medium;
    border-style: groove;
	padding: 10px 0px 10px 0px;
}

/* Responsive layout - makes the two columns stack on top of each other instead of next to each other */
@media screen and (max-width: 600px) {
  .column {
    width: 100%;
  }
}

/* The Modal (background) */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  padding-top: 100px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content */
.modal-content {
  background-color: #fefefe;
  margin: auto;
  padding: 20px;
  width: 80%;
}

/* The Close Button */
.close {
  color: #aaaaaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}

#container {
    width: 80%;
    height: 90%;
}

.anychart-credits{
display:none;
}

</style>
</head>
<body>
<script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-base.min.js"></script>
<script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-radar.min.js"></script>
<script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-core.min.js"></script>
<script type="text/javascript" src="View1.js"></script>
<script type="text/javascript" src="View2.js"></script>

<div class="row">
	<div id="maleicon" style="margin:0 5% 0 5%;float:left;width:5%">
		<img src="male.png" alt="Male" height="50" style="margin:5% 15% 0 15%;width:70%">
		<p style="text-align:center;margin:auto">Male</p>
	</div>
	<div style="float:left;width:70%">
		<h2 style="text-align:center">Gender Pay Gap Analysis</h2>
	</div>
	<div id="femaleicon" style="margin:0 5% 0 5%;float:left;width:5%">
		<img src="Female.png" alt="Female" height="50" style="margin:5% 15% 0 15%;width:70%">
		<p style="text-align:center;margin:auto">Female</p>
	</div>
</div>
<div class="row">
  <div class="column1">
    <h2>Filters</h2>
	
  
	<h3 class="wid_head">Seniority Level</h3>
	<div class="items">
		<input type="radio" id="frame1" class = "frame" name="frame" value="1" checked>
		<label for="frame1">1</label><br>
		<input type="radio" id="frame2" class = "frame" name="frame" value="2">
		<label for="frame2">2</label><br>
		<input type="radio" id="frame3" class = "frame" name="frame" value="3">
		<label for="frame3">3</label><br>
		<input type="radio" id="frame4" class = "frame" name="frame" value="4">
		<label for="frame4">4</label><br>
		<input type="radio" id="frame5" class = "frame" name="frame" value="5">
		<label for="frame5">5</label>
	</div>

	<!-- <h3 class="wid_head">Display Frame</h3>
	<div class="items">
		<input type="radio" id="frame1" class = "frame" name="frame" value="Frame 1" >
		<label for="frame1">Department vs Seniority</label><br>
		<input type="radio" id="frame2" class = "frame" name="frame" value="Frame 2" checked>
		<label for="frame2">Job Profile</label>
	</div> -->
	
    <h3 class="wid_head">Pay Type</h3>
	<div class="items">
		<input type="radio" id="basicpay" class = "pay" name="pay" value="BasePay">
		<label for="male">Basic Pay</label><br>
		<input type="radio" id="bonuspay" class = "pay" name="pay" value="BonusPay">
		<label for="female">Bonus Pay</label><br>
		<input type="radio" id="totalpay" class = "pay" name="pay" value="TotalPay" checked>
		<label for="other">Total Pay</label>
	</div>
	
	<div id="filter_Education">
		<h3 class="wid_head">Education</h3>
		<div class="items">
			<input class="filter_edu" id="hs_button" type="checkbox" value="High School" checked onclick="handleClick(this);">High School</input>
			<br>
			<input class="filter_edu" id="cg_button" type="checkbox" value="College" checked onclick="handleClick(this);">College</input>
			<br>
			<input class="filter_edu" id="ms_button" type="checkbox" value="Masters"checked onclick="handleClick(this);">Master's</input>
			<br>
			<input class="filter_edu" id="pd_button" type="checkbox" value="PhD" checked onclick="handleClick(this);">PhD</input>
		</div>
	</div>
	
	<br>
	<!-- The Modal -->
	<div id="myModal" class="modal">

	  <!-- Modal content -->
	  <div class="modal-content">
		<span class="close">&times;</span>
	  </div>
	  <div id="container" class="modal-content">
	  </div>

	</div>
  </div>
  <div class="column2 Frame1">
	<div class="row" id="my_dataviz_basic" style="height:90%">
	</div>
	<div class="row" id="my_dataviz_bonus" style="height:90%">
	</div>
	<div class="row" id="my_dataviz_total" style="height:90%">
	</div>
	<div class="row" id="my_dataviz_basic1">
	</div>
	<div class="row" id="my_dataviz_bonus1">
	</div>
	<div class="row" id="my_dataviz_total1">
	</div>
  </div>
  <div class="column3 Frame1" >
	<div id="gender_pie" style="height:80%">
	</div>
  </div>
  <div class="column2_1 Frame2">
	<div class="row" id="container1" style="height:100%"></div>
  </div>
  </div>
</div>

<script>

// Get the modal
var modal = document.getElementById("myModal");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
  document.getElementById('container').innerHTML = "";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  document.getElementById('container').innerHTML = "";
  }
}

$(document).ready(function() {
	$('#my_dataviz_basic').hide();
	$('#my_dataviz_bonus').hide();
	$('#my_dataviz_total').show();
	$('#my_dataviz_basic1').hide();
	$('#my_dataviz_bonus1').hide();
	$('#my_dataviz_total1').show();
	$('.Frame1').hide();
	$('.Frame2').show();
	// call function to display view 2 chart
	FuncView2();
    $('.pay').click(function() {
        if (this.value == 'BasePay') {
			var pay_type = "basic";
			$('#my_dataviz_basic').show();
			$('#my_dataviz_bonus').hide();
			$('#my_dataviz_total').hide();
			$('#my_dataviz_basic1').show();
			$('#my_dataviz_bonus1').hide();
			$('#my_dataviz_total1').hide();
        }
        else if (this.value == 'BonusPay') {
			var pay_type = "bonus";
			$('#my_dataviz_basic').hide();
			$('#my_dataviz_bonus').show();
			$('#my_dataviz_total').hide();
			$('#my_dataviz_basic1').hide();
			$('#my_dataviz_bonus1').show();
			$('#my_dataviz_total1').hide();
		}
        else if (this.value == 'TotalPay') {
			var pay_type = "total";
			pay_type = 'd.TotalPay';
			$('#my_dataviz_basic').hide();
			$('#my_dataviz_bonus').hide();
			$('#my_dataviz_total').show();
			$('#my_dataviz_basic1').hide();
			$('#my_dataviz_bonus1').hide();
			$('#my_dataviz_total1').show();
        }
	
		// call function to display view 2 chart
		FuncView2();
    });
    $('.frame').click(function() {
        if (this.value == '1') {  
		    FuncView2();
			// $('.Frame1').show();
			// $('.Frame2').hide();
        }
        else if (this.value == '2') {
		    FuncView2();
			// $('.Frame1').hide();
			// $('.Frame2').show();
        }
        else if (this.value == '3') {
		    FuncView2();
        }
        else if (this.value == '4') {
		    FuncView2();
        }
        else if (this.value == '5') {
		    FuncView2();
		}
    });
});

function FilterEducationData(data) {
	var data = data.filter(function(d) {
		if (document.getElementById("cg_button").checked == false) {
			return d.Education != 'College';
        }
		else{
			return d;
		}
		})

	var data = data.filter(function(d) {
		if (document.getElementById("hs_button").checked == false) {
			return d.Education != 'High School';
        }
		else{
			return d;
		}
		})

	var data = data.filter(function(d) {
		if (document.getElementById("ms_button").checked == false) {
			return d.Education != 'Masters';
        }
		else{
			return d;
		}
		})

	var data = data.filter(function(d) {
		if (document.getElementById("pd_button").checked == false) {
			return d.Education != 'PhD';
        }
		else{
			return d;
		}
		})
	UpdateGenderPie(data);
	return data;
}

// set the dimensions and margins of the graph
var margin = {top: 80, right: 25, bottom: 30, left: 100},
  width = 920 - margin.left - margin.right,
  height = 550 - margin.top - margin.bottom;

		
// append the svg color graph the page
// var svg1 = d3.select("#my_dataviz_total1")
// .append("svg")
//   .attr("width", width + margin.left + margin.right)
//   .attr("height", 60)
// .append("g")
//   .attr("transform",
//         "translate(" + 580 + "," + '-10' + ")");

// // Color hue chart
// var colorData = [1,2,3,4,5,6,7,8,9,10],
// 	myColorHue = d3.scaleLinear().domain([1,10]).range(["white", "purple"]);
// 	svg1.selectAll()
// 	.data(colorData)
// 	.enter()
// 	.append("circle")
// 	.attr("cx", function(d,i){return 30 + i*30})
// 	.attr("cy", 50)
// 	.attr("r", 10)
// 	.attr("fill", function(d){return myColorHue(d) })
//     .style("stroke-width", 1)
//     .style("stroke", "black");
	
// 	svg1.append("text")
//         .attr("x", 20)
//         .attr("y", 30)
//         .attr("text-anchor", "left")
//         .style("font-size", "14px")
//         .text("74K");
	
// 	svg1.append("text")
//         .attr("x", 280)
//         .attr("y", 30)
//         .attr("text-anchor", "left")
//         .style("font-size", "14px")
//         .text("130K");
	
// 	svg1.append("text")
//         .attr("x", 130)
//         .attr("y", 30)
//         .attr("text-anchor", "left")
//         .style("font-size", "14px")
//         .text("Salary Range");
		
// append the svg object to the body of the page
// var svg = d3.select("#my_dataviz_total")
// .append("svg")
//   .attr("width", '100%') //width + margin.left + margin.right)
//   .attr("height", '100%') //height + margin.top + margin.bottom)
// .append("g")
//   .attr("transform",
//         "translate(" + margin.left + "," + margin.top + ")");
	
// Add title to graph
// svg.append("text")
//         .attr("x", 0)
//         .attr("y", -50)
//         .attr("text-anchor", "left")
//         .style("font-size", "22px")
//         .text("Department VS Seniority");

// Add subtitle to graph
// svg.append("text")
//         .attr("x", 0)
//         .attr("y", -20)
//         .attr("text-anchor", "left")
//         .style("font-size", "14px")
//         .style("fill", "grey")
//         .style("max-width", 400)
//         .text("Disparity in salary of male/female based on department and senority");

//Read the data
// d3.csv("Glassdoor Gender Pay Gap.csv", function(data) {
// 	ProcessTotalPay(data);
// 	UpdateGenderPie(data);
// })

function ProcessTotalPay(data) {

  var data = FilterEducationData(data);
	
  // Labels of row and columns -> unique identifier of the column called 'group' and 'variable'
  var myDept = d3.map(data, function(d){return d.Department;}).keys()
  var mySenior = d3.map(data, function(d){return d.Seniority;}).keys()
  mySenior.sort();
  myDept.sort();

  // Build X scales and axis:
  var x = d3.scaleBand()
    .range([ 0, width ])
    .domain(mySenior)
    .padding(0.03);
  svg.append("g")
    .style("font-size", 15)
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x).tickSize(0))
    .select(".domain").remove()

  // text label for the x axis
  svg.append("text")             
      .attr("transform",
            "translate(" + 350 + " ," + (height + 25) + ")")
      .style("font-size", 13)
      .text("Seniority Level");

  // Build Y scales and axis:
  var y = d3.scaleBand()
    .range([ height, 0 ])
    .domain(myDept)
    .padding(0.03);
  svg.append("g")
    .style("font-size", 15)
    .call(d3.axisLeft(y).tickSize(0))
    .select(".domain").remove()

  // Build color scale
  var myColor = d3.scaleLinear()
    .range(["white", "purple"])
	.domain([74000,130000])

  // create a tooltip
  var tooltip = d3.select("#my_dataviz_total")
    .append("div")
    .style("opacity", 0)
    .attr("class", "tooltip")
    .style("background-color", "purple")
    .style("border", "solid")
    .style("border-width", "2px")
    .style("border-radius", "5px")
    .style("position", "absolute")
    .style("color", "white")

  // Three function that change the tooltip when user hover / move / leave a cell
  var mouseover = function(d) {
    tooltip
      .style("opacity", 1)
    d3.select(this)
      .style("stroke", "black")
	UpdateGenderPie(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department }));
  }
  var mousemove = function(d) {
    tooltip
	  .data(data)
      .html("Avg. Sal: " + d3.mean(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department }), function(d) { return d.TotalPay; })
	  + "<br>ID: " + d.Department + "/S" + d.Seniority
	  + "<br>Label: " + d.Department
	  + "<br># of person: " + (d3.sum(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department }), function(d) { return d.Seniority; }) / d.Seniority)
	  )
      .style("left", (d3.mouse(this)[0]+400) + "px")
      .style("top", (d3.mouse(this)[1]+180) + "px")
      .style("z-index", 1)
  }
  var mouseleave = function(d) {
    tooltip
      .style("opacity", 0)
    d3.select(this)
      .style("stroke", "none")
      .style("opacity", 0.8)
	UpdateGenderPie(data);
  }

  // Three function that change the tooltip when user hover / move / leave a cell
  var mouseovermale = function(d) {
    tooltip
      .style("opacity", 1)
    d3.select(this)
      .style("stroke-width", 4)
      .style("stroke", "black")
	UpdateGenderPie(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department }));
  }
  var mousemovemale = function(d) {
    tooltip
      .html("Avg. Sal: " + d3.mean(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department && e.Gender == "Male" }), function(d) { return d.TotalPay; })
	  + "<br>ID: " + d.Department + "/S" + d.Seniority + "/Male"
	  + "<br>Label: Male"
	  + "<br># of person: " + (d3.sum(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department && e.Gender == "Male" }), function(d) { return d.Seniority; }) / d.Seniority)
	  )
      .style("left", (d3.mouse(this)[0]+400) + "px")
      .style("top", (d3.mouse(this)[1]+180) + "px")
      .style("z-index", 1)
  }
  var mouseleavemale = function(d) {
    tooltip
      .style("opacity", 0)
    d3.select(this)
      .style("stroke", "none")
      .style("opacity", 0.8)
	UpdateGenderPie(data);
  }

  // Three function that change the tooltip when user hover / move / leave a cell
  var mouseoverfemale = function(d) {
    tooltip
      .style("opacity", 1)
    d3.select(this)
      .style("stroke-width", 4)
      .style("stroke", "black")
	UpdateGenderPie(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department }));
  }
  var mousemovefemale = function(d) {
    tooltip
      .html("Avg. Sal: " + d3.mean(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department && e.Gender == "Female" }), function(d) { return d.TotalPay; })
	  + "<br>ID: " + d.Department + "/S" + d.Seniority + "/Female"
	  + "<br>Label: Female"
	  + "<br># of person: " + (d3.sum(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department && e.Gender == "Female" }), function(d) { return d.Seniority; }) / d.Seniority)
	  )
      .style("left", (d3.mouse(this)[0]+400) + "px")
      .style("top", (d3.mouse(this)[1]+180) + "px")
      .style("z-index", 1)
  }
  var mouseleavefemale = function(d) {
    tooltip
      .style("opacity", 0)
    d3.select(this)
      .style("stroke", "none")
      .style("opacity", 0.8)
	UpdateGenderPie(data);
  }
  
  var mouseclick = function(d) {
	var senior = d.Seniority;
	var dmt = d.Department;
	var filterdata = data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department })
	FilterTop5Profile(filterdata,dmt,senior)
	modal.style.display = "block"
  }
  
  // add the squares
  svg.selectAll()
    .data(data, function(d) {return d.Seniority+':'+d.Department;})
    //.data(mySenior)
    .enter()
    .append("rect")
      .attr("x", function(d) { return x(d.Seniority) })
      .attr("y", function(d) { return y(d.Department)} )
      .attr("rx", 4)
      .attr("ry", 4)
      .attr("width", x.bandwidth() )
      .attr("height", y.bandwidth() )
      .style("fill", function(d) { return myColor(d3.mean(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department }), function(d) { return d.TotalPay; }))} )
      .style("stroke-width", 4)
      .style("stroke", "none")
      .style("opacity", 0.8)
	.on("mouseover", mouseover)
    .on("mousemove", mousemove)
    .on("mouseleave", mouseleave)
	.on("click", mouseclick)
  //}
  //}
  // add the squares for male
  svg.selectAll()
    .data(data, function(d) {return d.Seniority+':'+d.Department;})
    .enter()
    .append("rect")
      .attr("x", function(d) { return x(d.Seniority) + 10 })
      .attr("y", function(d) { return y(d.Department) + 15 })
      .attr("rx", 4)
      .attr("ry", 4)
      .attr("width", 60 )
      .attr("height", 60 )
      .style("fill", function(d) { return myColor(d3.mean(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department && e.Gender == "Male" }), function(d) { return d.TotalPay; }))} )
      .style("stroke-width", 0.5)
      .style("stroke", "black")
      .style("opacity", 0.8)
    .on("mouseover", mouseovermale)
    .on("mousemove", mousemovemale)
    .on("mouseleave", mouseleavemale)

  // add the squares for female
  svg.selectAll()
    .data(data, function(d) {return d.Seniority+':'+d.Department;})
    .enter()
    .append("rect")
      .attr("x", function(d) { return x(d.Seniority) + 80 })
      .attr("y", function(d) { return y(d.Department) + 15 })
      .attr("rx", 4)
      .attr("ry", 4)
      .attr("width", 60 )
      .attr("height", 60 )
      .style("fill", function(d) { return myColor(d3.mean(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department && e.Gender == "Female" }), function(d) { return d.TotalPay; }))} )
      .style("stroke-width", 0.5)
      .style("stroke", "black")
      .style("opacity", 0.8)
    .on("mouseover", mouseoverfemale)
    .on("mousemove", mousemovefemale)
    .on("mouseleave", mouseleavefemale)

<!--
//Add Code here

// Add Male SVG image
	svg.append('svg:defs')
	.append("svg:pattern")
    .attr("id", "male_avatar")
    .attr("width", 30)
    .attr("height", 30)
    .append("svg:image")
    .attr("xlink:href", 'Male.png')
    .attr("width", 30)
    .attr("height", 30)
    .attr("x", 0)
    .attr("y", 0)
	
// Add Female SVG image
	svg.append('svg:defs')
	.append("svg:pattern")
    .attr("id", "female_avatar")
    .attr("width", 30)
    .attr("height", 30)
    .append("svg:image")
    .attr("xlink:href", 'Female.png')
    .attr("width", 30)
    .attr("height", 30)
    .attr("x", 0)
    .attr("y", 0)
	
	for(var i=1;i<=myDept.length;i++){
		for(var j=1;j<=mySenior.length;j++){
		if (i == 1 && j == 1){
  // Add Male SVG circle
		svg.append("circle")    
		  .attr("cx", 43)
		  .attr("cy", 50)
		  .attr("r", 15)
		  .style("fill", "url(#male_avatar)" )
		  .style("stroke-width", 0.5)
		  .style("stroke", "black")
		  .style("opacity", 0.8)
		  .on("mouseover", mouseovermale)
		  .on("mousemove", mousemovemale)
		  .on("mouseleave", mouseleavemale)
		  
  // Add Female SVG circle
		svg.append("circle")
		  .attr("cx", 115)
		  .attr("cy", 50)
		  .attr("r", 15)
		  .style("fill", "url(#female_avatar)" )
		  .style("stroke-width", 0.5)
		  .style("stroke", "black")
		  .style("opacity", 0.8)
		  .on("mouseover", mouseoverfemale)
		  .on("mousemove", mousemovefemale)
		  .on("mouseleave", mouseleavefemale)
		}
		else{
  // Add Male SVG circle
		svg.append("circle")
		  .attr("cx", 43 + 158*(i-1))
		  .attr("cy", 50 + 87*(j-1))
		  .attr("r", 15)
		  .style("fill", "url(#male_avatar)" )
		  .style("stroke-width", 0.5)
		  .style("stroke", "black")
		  .style("opacity", 0.8)
		  .on("mouseover", mouseovermale)
		  .on("mousemove", mousemovemale)
		  .on("mouseleave", mouseleavemale)
		  
  // Add Female SVG circle
		svg.append("circle")
		  .attr("cx", 115 + 158*(i-1))
		  .attr("cy", 50 + 87*(j-1))
		  .attr("r", 15)
		  .style("fill", "url(#female_avatar)" )
		  .style("stroke-width", 0.5)
		  .style("stroke", "black")
		  .style("opacity", 0.8)
		  .on("mouseover", mouseoverfemale)
		  .on("mousemove", mousemovefemale)
		  .on("mouseleave", mouseleavefemale)
		}
		}
	}
}
	
	
// append the svg color graph the page
var svg_basic1 = d3.select("#my_dataviz_basic1")
.append("svg")
  .attr("width", width + margin.left + margin.right)
  .attr("height", 60)
.append("g")
  .attr("transform",
        "translate(" + 580 + ",-10)");

// Color hue chart
var colorData = [1,2,3,4,5,6,7,8,9,10],
	myColorHue = d3.scaleLinear().domain([1,10]).range(["white", "purple"]);
	svg_basic1.selectAll()
	.data(colorData)
	.enter()
	.append("circle")
	.attr("cx", function(d,i){return 30 + i*30})
	.attr("cy", 50)
	.attr("r", 10)
	.attr("fill", function(d){return myColorHue(d) })
    .style("stroke-width", 1)
    .style("stroke", "black");
	
	svg_basic1.append("text")
        .attr("x", 20)
        .attr("y", 30)
        .attr("text-anchor", "left")
        .style("font-size", "14px")
        .text("67K");
	
	svg_basic1.append("text")
        .attr("x", 280)
        .attr("y", 30)
        .attr("text-anchor", "left")
        .style("font-size", "14px")
        .text("135K");
	
	svg_basic1.append("text")
        .attr("x", 130)
        .attr("y", 30)
        .attr("text-anchor", "left")
        .style("font-size", "14px")
        .text("Salary Range");
		
// append the svg object to the body of the page
var svg_basic = d3.select("#my_dataviz_basic")
.append("svg")
  .attr("width", '100%') //width + margin.left + margin.right)
  .attr("height", '100%') //height + margin.top + margin.bottom)
.append("g")
  .attr("transform",
        "translate(" + margin.left + "," + margin.top + ")");
	
// Add title to graph
svg_basic.append("text")
        .attr("x", 0)
        .attr("y", -50)
        .attr("text-anchor", "left")
        .style("font-size", "22px")
        .text("Department VS Seniority");

// Add subtitle to graph
svg_basic.append("text")
        .attr("x", 0)
        .attr("y", -20)
        .attr("text-anchor", "left")
        .style("font-size", "14px")
        .style("fill", "grey")
        .style("max-width", 400)
        .text("Disparity in salary of male/female based on department and senority");

//Read the data
d3.csv("Glassdoor Gender Pay Gap.csv", function(data) {
	ProcessBasicPay(data);
	UpdateGenderPie(data);
})

function ProcessBasicPay(data) {
	
  var data = FilterEducationData(data);
  
  // Labels of row and columns -> unique identifier of the column called 'group' and 'variable'
  var myDept = d3.map(data, function(d){return d.Department;}).keys()
  var mySenior = d3.map(data, function(d){return d.Seniority;}).keys()
  mySenior.sort();
  myDept.sort();

  // Build X scales and axis:
  var x = d3.scaleBand()
    .range([ 0, width ])
    .domain(mySenior)
    .padding(0.03);
  svg_basic.append("g")
    .style("font-size", 15)
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x).tickSize(0))
    .select(".domain").remove()

  // text label for the x axis
  svg_basic.append("text")             
      .attr("transform",
            "translate(" + 350 + " ," + (height + 25) + ")")
      .style("font-size", 13)
      .text("Seniority Level");

  // Build Y scales and axis:
  var y = d3.scaleBand()
    .range([ height, 0 ])
    .domain(myDept)
    .padding(0.03);
  svg_basic.append("g")
    .style("font-size", 15)
    .call(d3.axisLeft(y).tickSize(0))
    .select(".domain").remove()

  // Build color scale
  var myColor = d3.scaleLinear()
    .range(["white", "purple"])
	.domain([67000,135000])

  // create a tooltip
  var tooltip = d3.select("#my_dataviz_basic")
    .append("div")
    .style("opacity", 0)
    .attr("class", "tooltip")
    .style("background-color", "purple")
    .style("border", "solid")
    .style("border-width", "2px")
    .style("border-radius", "5px")
    .style("position", "absolute")
    .style("color", "white")

  // Three function that change the tooltip when user hover / move / leave a cell
  var mouseoverbasic = function(d) {
    tooltip
      .style("opacity", 1)
    d3.select(this)
      .style("stroke", "black")
	UpdateGenderPie(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department }));
  }
  var mousemovebasic = function(d) {
    tooltip
      .html("Avg. Sal: " + d3.mean(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department }), function(d) { return d.BasePay; })
	  + "<br>ID: " + d.Department + "/S" + d.Seniority
	  + "<br>Label: " + d.Department
	  + "<br># of person: " + (d3.sum(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department }), function(d) { return d.Seniority; }) / d.Seniority)
	  )
      .style("left", (d3.mouse(this)[0]+400) + "px")
      .style("top", (d3.mouse(this)[1]+180) + "px")
      .style("z-index", 1)
  }
  var mouseleavebasic = function(d) {
    tooltip
      .style("opacity", 0)
    d3.select(this)
      .style("stroke", "none")
      .style("opacity", 0.8)
	UpdateGenderPie(data);
  }

  // Three function that change the tooltip when user hover / move / leave a cell
  var mouseovermalebasic = function(d) {
    tooltip
      .style("opacity", 1)
    d3.select(this)
      .style("stroke-width", 4)
      .style("stroke", "black")
	UpdateGenderPie(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department }));
  }
  var mousemovemalebasic = function(d) {
    tooltip
      .html("Avg. Sal: " + d3.mean(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department && e.Gender == "Male" }), function(d) { return d.BasePay; })
	  + "<br>ID: " + d.Department + "/S" + d.Seniority + "/Male"
	  + "<br>Label: Male"
	  + "<br># of person: " + (d3.sum(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department && e.Gender == "Male" }), function(d) { return d.Seniority; }) / d.Seniority)
	  )
      .style("left", (d3.mouse(this)[0]+400) + "px")
      .style("top", (d3.mouse(this)[1]+180) + "px")
      .style("z-index", 1)
  }
  var mouseleavemalebasic = function(d) {
    tooltip
      .style("opacity", 0)
    d3.select(this)
      .style("stroke", "none")
      .style("opacity", 0.8)
	UpdateGenderPie(data);
  }

  // Three function that change the tooltip when user hover / move / leave a cell
  var mouseoverfemalebasic = function(d) {
    tooltip
      .style("opacity", 1)
    d3.select(this)
      .style("stroke-width", 4)
      .style("stroke", "black")
	UpdateGenderPie(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department }));
  }
  var mousemovefemalebasic = function(d) {
    tooltip
      .html("Avg. Sal: " + d3.mean(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department && e.Gender == "Female" }), function(d) { return d.BasePay; })
	  + "<br>ID: " + d.Department + "/S" + d.Seniority + "/Female"
	  + "<br>Label: Female"
	  + "<br># of person: " + (d3.sum(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department && e.Gender == "Female" }), function(d) { return d.Seniority; }) / d.Seniority)
	  )
      .style("left", (d3.mouse(this)[0]+400) + "px")
      .style("top", (d3.mouse(this)[1]+180) + "px")
      .style("z-index", 1)
  }
  var mouseleavefemalebasic = function(d) {
    tooltip
      .style("opacity", 0)
    d3.select(this)
      .style("stroke", "none")
      .style("opacity", 0.8)
	UpdateGenderPie(data);
  }
  
  var mouseclick = function(d) {
	var senior = d.Seniority;
	var dmt = d.Department;
	var filterdata = data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department })
	FilterTop5Profile(filterdata,dmt,senior)
	modal.style.display = "block"
  }
  
  // add the squares
  svg_basic.selectAll()
    .data(data, function(d) {return d.Seniority+':'+d.Department;})
    .enter()
    .append("rect")
      .attr("x", function(d) { return x(d.Seniority) })
      .attr("y", function(d) { return y(d.Department) })
      .attr("rx", 4)
      .attr("ry", 4)
      .attr("width", x.bandwidth() )
      .attr("height", y.bandwidth() )
      .style("fill", function(d) { return myColor(d3.mean(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department }), function(d) { return d.BasePay; }))} )
      .style("stroke-width", 4)
      .style("stroke", "none")
      .style("opacity", 0.8)
    .on("mouseover", mouseoverbasic)
    .on("mousemove", mousemovebasic)
    .on("mouseleave", mouseleavebasic)
    .on("click", mouseclick)

  // add the squares for male
  svg_basic.selectAll()
    .data(data, function(d) {return d.Seniority+':'+d.Department;})
    .enter()
    .append("rect")
      .attr("x", function(d) { return x(d.Seniority) + 10 })
      .attr("y", function(d) { return y(d.Department) + 15 })
      .attr("rx", 4)
      .attr("ry", 4)
      .attr("width", 60 )
      .attr("height", 60 )
      .style("fill", function(d) { return myColor(d3.mean(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department && e.Gender == "Male" }), function(d) { return d.BasePay; }))} )
      .style("stroke-width", 0.5)
      .style("stroke", "black")
      .style("opacity", 0.8)
    .on("mouseover", mouseovermalebasic)
    .on("mousemove", mousemovemalebasic)
    .on("mouseleave", mouseleavemalebasic)

  // add the squares for female
  svg_basic.selectAll()
    .data(data, function(d) {return d.Seniority+':'+d.Department;})
    .enter()
    .append("rect")
      .attr("x", function(d) { return x(d.Seniority) + 80 })
      .attr("y", function(d) { return y(d.Department) + 15 })
      .attr("rx", 4)
      .attr("ry", 4)
      .attr("width", 60 )
      .attr("height", 60 )
      .style("fill", function(d) { return myColor(d3.mean(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department && e.Gender == "Female" }), function(d) { return d.BasePay; }))} )
      .style("stroke-width", 0.5)
      .style("stroke", "black")
      .style("opacity", 0.8)
    .on("mouseover", mouseoverfemalebasic)
    .on("mousemove", mousemovefemalebasic)
    .on("mouseleave", mouseleavefemalebasic)

<!--
//Add Code here

// Add Male SVG image
	svg_basic.append('svg:defs')
	.append("svg:pattern")
    .attr("id", "male_avatarbasic")
    .attr("width", 30)
    .attr("height", 30)
    .append("svg:image")
    .attr("xlink:href", 'Male.png')
    .attr("width", 30)
    .attr("height", 30)
    .attr("x", 0)
    .attr("y", 0)
	
// Add Female SVG image
	svg_basic.append('svg:defs')
	.append("svg:pattern")
    .attr("id", "female_avatarbasic")
    .attr("width", 30)
    .attr("height", 30)
    .append("svg:image")
    .attr("xlink:href", 'Female.png')
    .attr("width", 30)
    .attr("height", 30)
    .attr("x", 0)
    .attr("y", 0)
	
	for(var i=1;i<=myDept.length;i++){
		for(var j=1;j<=mySenior.length;j++){
		if (i == 1 && j == 1){
  // Add Male SVG circle
		svg_basic.append("circle")
		  .attr("cx", 43)
		  .attr("cy", 50)
		  .attr("r", 15)
		  .style("fill", "url(#male_avatarbasic)" )
		  .style("stroke-width", 0.5)
		  .style("stroke", "black")
		  .style("opacity", 0.8)
		  .on("mouseover", mouseovermalebasic)
		  .on("mousemove", mousemovemalebasic)
		  .on("mouseleave", mouseleavemalebasic)
		  
  // Add Female SVG circle
		svg_basic.append("circle")
		  .attr("cx", 115)
		  .attr("cy", 50)
		  .attr("r", 15)
		  .style("fill", "url(#female_avatarbasic)" )
		  .style("stroke-width", 0.5)
		  .style("stroke", "black")
		  .style("opacity", 0.8)
		  .on("mouseover", mouseoverfemalebasic)
		  .on("mousemove", mousemovefemalebasic)
		  .on("mouseleave", mouseleavefemalebasic)
		}
		else{
  // Add Male SVG circle
		svg_basic.append("circle")
		  .attr("cx", 43 + 158*(i-1))
		  .attr("cy", 50 + 87*(j-1))
		  .attr("r", 15)
		  .style("fill", "url(#male_avatarbasic)" )
		  .style("stroke-width", 0.5)
		  .style("stroke", "black")
		  .style("opacity", 0.8)
		  .on("mouseover", mouseovermalebasic)
		  .on("mousemove", mousemovemalebasic)
		  .on("mouseleave", mouseleavemalebasic)
		  
  // Add Female SVG circle
		svg_basic.append("circle")
		  .attr("cx", 115 + 158*(i-1))
		  .attr("cy", 50 + 87*(j-1))
		  .attr("r", 15)
		  .style("fill", "url(#female_avatarbasic)" )
		  .style("stroke-width", 0.5)
		  .style("stroke", "black")
		  .style("opacity", 0.8)
		  .on("mouseover", mouseoverfemalebasic)
		  .on("mousemove", mousemovefemalebasic)
		  .on("mouseleave", mouseleavefemalebasic)
		}
		}
	}
}

	
// append the svg color graph the page
var svg_bonus1 = d3.select("#my_dataviz_bonus1")
.append("svg")
  .attr("width", width + margin.left + margin.right)
  .attr("height", 60)
.append("g")
  .attr("transform",
        "translate(" + 580 + ",-10)");

// Color hue chart
var colorData = [1,2,3,4,5,6,7,8,9,10],
	myColorHue = d3.scaleLinear().domain([1,10]).range(["white", "purple"]);
	svg_bonus1.selectAll()
	.data(colorData)
	.enter()
	.append("circle")
	.attr("cx", function(d,i){return 30 + i*30})
	.attr("cy", 50)
	.attr("r", 10)
	.attr("fill", function(d){return myColorHue(d) })
    .style("stroke-width", 1)
    .style("stroke", "black");
	
	svg_bonus1.append("text")
        .attr("x", 20)
        .attr("y", 30)
        .attr("text-anchor", "left")
        .style("font-size", "14px")
        .text("5.5K");
	
	svg_bonus1.append("text")
        .attr("x", 280)
        .attr("y", 30)
        .attr("text-anchor", "left")
        .style("font-size", "14px")
        .text("8K");
	
	svg_bonus1.append("text")
        .attr("x", 130)
        .attr("y", 30)
        .attr("text-anchor", "left")
        .style("font-size", "14px")
        .text("Salary Range");
		
// append the svg object to the body of the page
var svg_bonus = d3.select("#my_dataviz_bonus")
.append("svg")
  .attr("width", '100%') //width + margin.left + margin.right)
  .attr("height", '100%') //height + margin.top + margin.bottom)
.append("g")
  .attr("transform",
        "translate(" + margin.left + "," + margin.top + ")");
	
// Add title to graph
svg_bonus.append("text")
        .attr("x", 0)
        .attr("y", -50)
        .attr("text-anchor", "left")
        .style("font-size", "22px")
        .text("Department VS Seniority");

// Add subtitle to graph
svg_bonus.append("text")
        .attr("x", 0)
        .attr("y", -20)
        .attr("text-anchor", "left")
        .style("font-size", "14px")
        .style("fill", "grey")
        .style("max-width", 400)
        .text("Disparity in salary of male/female based on department and senority");

//Read the data
d3.csv("Glassdoor Gender Pay Gap.csv", function(data) {
	
	ProcessBonusPay(data);
	UpdateGenderPie(data);
	function handleClick() { 
		if (document.getElementById("cg_button").checked == false
		&& document.getElementById("hs_button").checked == false
		&& document.getElementById("ms_button").checked == false
		&& document.getElementById("pd_button").checked == false) {
			alert('All Education unchecked, data is displayed of last checked box!');
        }
		FuncView2();
		ProcessBonusPay(data);
		ProcessBasicPay(data);
		ProcessTotalPay(data);
	}
	d3.selectAll(".filter_edu").on("click", handleClick);
})

function ProcessBonusPay(data) {
	
  var data = FilterEducationData(data);
		
// Labels of row and columns -> unique identifier of the column called 'group' and 'variable'
  var myDept = d3.map(data, function(d){return d.Department;}).keys()
  var mySenior = d3.map(data, function(d){return d.Seniority;}).keys()
  mySenior.sort();
  myDept.sort();

  // Build X scales and axis:
  var x = d3.scaleBand()
    .range([ 0, width ])
    .domain(mySenior)
    .padding(0.03);
  svg_bonus.append("g")
    .style("font-size", 15)
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x).tickSize(0))
    .select(".domain").remove()

  // text label for the x axis
  svg_bonus.append("text")             
      .attr("transform",
            "translate(" + 350 + " ," + (height + 25) + ")")
      .style("font-size", 13)
      .text("Seniority Level");

  // Build Y scales and axis:
  var y = d3.scaleBand()
    .range([ height, 0 ])
    .domain(myDept)
    .padding(0.03);
  svg_bonus.append("g")
    .style("font-size", 15)
    .call(d3.axisLeft(y).tickSize(0))
    .select(".domain").remove()

  // Build color scale
  var myColor = d3.scaleLinear()
    .range(["white", "purple"])
	.domain([5500,8000])

  // create a tooltip
  var tooltip = d3.select("#my_dataviz_bonus")
    .append("div")
    .style("opacity", 0)
    .attr("class", "tooltip")
    .style("background-color", "purple")
    .style("border", "solid")
    .style("border-width", "2px")
    .style("border-radius", "5px")
    .style("position", "absolute")
    .style("color", "white")

  // Three function that change the tooltip when user hover / move / leave a cell
  var mouseoverbonus = function(d) {
    tooltip
      .style("opacity", 1)
    d3.select(this)
      .style("stroke", "black")
	UpdateGenderPie(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department }));
  }
  var mousemovebonus = function(d) {
    tooltip
      .html("Avg. Sal: " + d3.mean(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department }), function(d) { return d.BonusPay; })
	  + "<br>ID: " + d.Department + "/S" + d.Seniority
	  + "<br>Label: " + d.Department
	  + "<br># of person: " + (d3.sum(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department }), function(d) { return d.Seniority; }) / d.Seniority)
	  )
      .style("left", (d3.mouse(this)[0]+400) + "px")
      .style("top", (d3.mouse(this)[1]+180) + "px")
      .style("z-index", 1)
  }
  var mouseleavebonus = function(d) {
    tooltip
      .style("opacity", 0)
    d3.select(this)
      .style("stroke", "none")
      .style("opacity", 0.8)
	UpdateGenderPie(data);
  }

  // Three function that change the tooltip when user hover / move / leave a cell
  var mouseovermalebonus = function(d) {
    tooltip
      .style("opacity", 1)
    d3.select(this)
      .style("stroke-width", 4)
      .style("stroke", "black")
	UpdateGenderPie(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department }));
  }
  var mousemovemalebonus = function(d) {
    tooltip
      .html("Avg. Sal: " + d3.mean(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department && e.Gender == "Male" }), function(d) { return d.BonusPay; })
	  + "<br>ID: " + d.Department + "/S" + d.Seniority + "/Male"
	  + "<br>Label: Male"
	  + "<br># of person: " + (d3.sum(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department && e.Gender == "Male" }), function(d) { return d.Seniority; }) / d.Seniority)
	  )
      .style("left", (d3.mouse(this)[0]+400) + "px")
      .style("top", (d3.mouse(this)[1]+180) + "px")
      .style("z-index", 1)
  }
  var mouseleavemalebonus = function(d) {
    tooltip
      .style("opacity", 0)
    d3.select(this)
      .style("stroke", "none")
      .style("opacity", 0.8)
	UpdateGenderPie(data);
  }

  // Three function that change the tooltip when user hover / move / leave a cell
  var mouseoverfemalebonus = function(d) {
    tooltip
      .style("opacity", 1)
    d3.select(this)
      .style("stroke-width", 4)
      .style("stroke", "black")
	UpdateGenderPie(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department }));
  }
  var mousemovefemalebonus = function(d) {
    tooltip
      .html("Avg. Sal: " + d3.mean(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department && e.Gender == "Female" }), function(d) { return d.BonusPay; })
	  + "<br>ID: " + d.Department + "/S" + d.Seniority + "/Female"
	  + "<br>Label: Female"
	  + "<br># of person: " + (d3.sum(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department && e.Gender == "Female" }), function(d) { return d.Seniority; }) / d.Seniority)
	  )
      .style("left", (d3.mouse(this)[0]+400) + "px")
      .style("top", (d3.mouse(this)[1]+180) + "px")
      .style("z-index", 1)
  }
  var mouseleavefemalebonus = function(d) {
    tooltip
      .style("opacity", 0)
    d3.select(this)
      .style("stroke", "none")
      .style("opacity", 0.8)
	UpdateGenderPie(data);
  }
  
  var mouseclick = function(d) {
	var senior = d.Seniority;
	var dmt = d.Department;
	var filterdata = data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department })
	FilterTop5Profile(filterdata,dmt,senior)
	modal.style.display = "block"
  }
  
  // add the squares
  svg_bonus.selectAll()
    .data(data, function(d) {return d.Seniority+':'+d.Department;})
    .enter()
    .append("rect")
      .attr("x", function(d) { return x(d.Seniority) })
      .attr("y", function(d) { return y(d.Department) })
      .attr("rx", 4)
      .attr("ry", 4)
      .attr("width", x.bandwidth() )
      .attr("height", y.bandwidth() )
      .style("fill", function(d) { return myColor(d3.mean(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department }), function(d) { return d.BonusPay; }))} )
      .style("stroke-width", 4)
      .style("stroke", "none")
      .style("opacity", 0.8)
    .on("mouseover", mouseoverbonus)
    .on("mousemove", mousemovebonus)
    .on("mouseleave", mouseleavebonus)
    .on("click", mouseclick)

  // add the squares for male
  svg_bonus.selectAll()
    .data(data, function(d) {return d.Seniority+':'+d.Department;})
    .enter()
    .append("rect")
      .attr("x", function(d) { return x(d.Seniority) + 10 })
      .attr("y", function(d) { return y(d.Department) + 15 })
      .attr("rx", 4)
      .attr("ry", 4)
      .attr("width", 60 )
      .attr("height", 60 )
      .style("fill", function(d) { return myColor(d3.mean(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department && e.Gender == "Male" }), function(d) { return d.BonusPay; }))} )
      .style("stroke-width", 0.5)
      .style("stroke", "black")
      .style("opacity", 0.8)
    .on("mouseover", mouseovermalebonus)
    .on("mousemove", mousemovemalebonus)
    .on("mouseleave", mouseleavemalebonus)

  // add the squares for female
  svg_bonus.selectAll()
    .data(data, function(d) {return d.Seniority+':'+d.Department;})
    .enter()
    .append("rect")
      .attr("x", function(d) { return x(d.Seniority) + 80 })
      .attr("y", function(d) { return y(d.Department) + 15 })
      .attr("rx", 4)
      .attr("ry", 4)
      .attr("width", 60 )
      .attr("height", 60 )
      .style("fill", function(d) { return myColor(d3.mean(data.filter(function(e){ return e.Seniority == d.Seniority && e.Department == d.Department && e.Gender == "Female" }), function(d) { return d.BonusPay; }))} )
      .style("stroke-width", 0.5)
      .style("stroke", "black")
      .style("opacity", 0.8)
    .on("mouseover", mouseoverfemalebonus)
    .on("mousemove", mousemovefemalebonus)
    .on("mouseleave", mouseleavefemalebonus)

<!--
//Add Code here

// Add Male SVG image
	svg_bonus.append('svg:defs')
	.append("svg:pattern")
    .attr("id", "male_avatarbonus")
    .attr("width", 30)
    .attr("height", 30)
    .append("svg:image")
    .attr("xlink:href", 'Male.png')
    .attr("width", 30)
    .attr("height", 30)
    .attr("x", 0)
    .attr("y", 0)
	
// Add Female SVG image
	svg_bonus.append('svg:defs')
	.append("svg:pattern")
    .attr("id", "female_avatarbonus")
    .attr("width", 30)
    .attr("height", 30)
    .append("svg:image")
    .attr("xlink:href", 'Female.png')
    .attr("width", 30)
    .attr("height", 30)
    .attr("x", 0)
    .attr("y", 0)
	
	for(var i=1;i<=myDept.length;i++){
		for(var j=1;j<=mySenior.length;j++){
		if (i == 1 && j == 1){
  // Add Male SVG circle
		svg_bonus.append("circle")
		  .attr("cx", 43)
		  .attr("cy", 50)
		  .attr("r", 15)
		  .style("fill", "url(#male_avatarbonus)" )
		  .style("stroke-width", 0.5)
		  .style("stroke", "black")
		  .style("opacity", 0.8)
		  .on("mouseover", mouseovermalebonus)
		  .on("mousemove", mousemovemalebonus)
		  .on("mouseleave", mouseleavemalebonus)
		  
  // Add Female SVG circle
		svg_bonus.append("circle")
		  .attr("cx", 115)
		  .attr("cy", 50)
		  .attr("r", 15)
		  .style("fill", "url(#female_avatarbonus)" )
		  .style("stroke-width", 0.5)
		  .style("stroke", "black")
		  .style("opacity", 0.8)
		  .on("mouseover", mouseoverfemalebonus)
		  .on("mousemove", mousemovefemalebonus)
		  .on("mouseleave", mouseleavefemalebonus)
		}
		else{
  // Add Male SVG circle
		svg_bonus.append("circle")
		  .attr("cx", 43 + 158*(i-1))
		  .attr("cy", 50 + 87*(j-1))
		  .attr("r", 15)
		  .style("fill", "url(#male_avatarbonus)" )
		  .style("stroke-width", 0.5)
		  .style("stroke", "black")
		  .style("opacity", 0.8)
		  .on("mouseover", mouseovermalebonus)
		  .on("mousemove", mousemovemalebonus)
		  .on("mouseleave", mouseleavemalebonus)
		  
  // Add Female SVG circle
		svg_bonus.append("circle")
		  .attr("cx", 115 + 158*(i-1))
		  .attr("cy", 50 + 87*(j-1))
		  .attr("r", 15)
		  .style("fill", "url(#female_avatarbonus)" )
		  .style("stroke-width", 0.5)
		  .style("stroke", "black")
		  .style("opacity", 0.8)
		  .on("mouseover", mouseoverfemalebonus)
		  .on("mousemove", mousemovefemalebonus)
		  .on("mouseleave", mouseleavefemalebonus)
		}
		}
	}
}

</script>
</body>
</html>